<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <title>Weather</title>
</head>
<body>
    
<div class="card">
    <div class="search">
        <input type="text" placeholder="Enter City Name" id="place">
        <button onclick="checkweather()"><img src="./images/search.png" alt=""></button>
    </div>
    <div class="weather">
        <img src="./images/clear.png" alt="" id="img">
        <h1 id="temp">22°C</h1>
        <h2 id="city">Bengaluru</h2>
    </div>
</div>

<script>
    const apikey = "5c8e2d3b623cbd058fef2e99d5d22fc9";
    const apiurl = "https://api.openweathermap.org/data/2.5/weather?units=metric&q=patna";
    
    async function checkweather(){
        var place = document.getElementById('place').value
        
        var temp = document.getElementById('temp')
        var city = document.getElementById('city')
        url = `https://api.openweathermap.org/data/2.5/weather?units=metric&q=${place}&appid=${apikey}`
        const response = await fetch(url);
        const data = await response.json()
        
        temp.innerHTML = (Math.round(data.main.temp)+'°C')
        console.log(data.main.temp)
        city.innerHTML = place.toUpperCase();
        
        // seting image
        let img = document.getElementById('img')
        let img_src = img.getAttribute('src')
        console.log(img_src)

        let id = data.weather[0].id
        console.log(id)
        
        if(id>=200 && id<300){
            img.setAttribute('src','./images/drizzle.png')
        }
        else if(id>=300 && id<400){
            img.setAttribute('src','./images/drizzle.png')
        }
        else if(id>=500 && id<600){
            img.setAttribute('src','./images/rain.png')
        }
        else if(id>=600 && id<700){
            img.setAttribute('src','./images/snow.png')
        }
        else if(id>=700 && id<800){
            img.setAttribute('src','./images/mist.png')
        }
        else{
            img.setAttribute('src','./images/clear.png')
        }

    }
</script>

</body>
</html>